<ion-app>
  <ion-header>
    <ion-toolbar>
      <ion-title>Shiny Checklist</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <ion-searchbar [(ngModel)]="filter.text"></ion-searchbar>
    <div class="ion-padding">
      <ion-chip color="primary">
        <ion-select
          interface="popover"
          [(ngModel)]="selectedPokemonList"
          (ionChange)="selectPokemonList($event)"
        >
          <ion-select-option
            *ngFor="let list of pokemonLists; let i = index"
            [value]="list"
          >
            {{ list.name }}
          </ion-select-option>
        </ion-select>
      </ion-chip>
      <ion-chip
        [color]="filter.checked ? 'primary' : 'light'"
        (click)="filter.checked = !filter.checked"
      >
        <ion-icon class="ion-no-margin" name="checkmark"></ion-icon>
      </ion-chip>
      <ion-chip
        [color]="filter.unchecked ? 'primary' : 'light'"
        (click)="filter.unchecked = !filter.unchecked"
      >
        <ion-icon class="ion-no-margin" name="close"></ion-icon>
      </ion-chip>
      <ion-chip style="float: right;">
        {{ getCheckedPokemon() }} / {{ pokemonList.length }}
        <!-- <ion-icon name="checkmark"></ion-icon> -->
      </ion-chip>
    </div>
    <ion-grid>
      <ion-row>
        <ion-col
          size-xl="1"
          size-lg="2"
          size-md="3"
          size-sm="4"
          size-xs="6"
          *ngFor="let pokemon of pokemonList | pokemonFilter: filter"
        >
          <ion-card
            [color]="pokemon.checked ? 'secondary' : 'light'"
            (click)="checkPokemon(pokemon)"
          >
            <ion-button
              *ngIf="pokemon.variety"
              color="dark"
              fill="clear"
              style="position: absolute; right: 0; z-index: 100;"
              (click)="showPokemonInfo(pokemon); $event.stopPropagation()"
            >
              <ion-icon name="ellipsis-horizontal" icon-only></ion-icon>
            </ion-button>
            <ion-card-header>
              <ion-card-subtitle>#{{ pokemon.id }}</ion-card-subtitle>
              <ion-card-title>{{ pokemon.name }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-img [src]="pokemon.imageUrl"></ion-img>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
</ion-app>
